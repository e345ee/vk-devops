# Тестовое задание на позицию DevOps в Vk
Необходимо разработать простое веб-приложение, возвращающее строку «Hello World!», и создать скрипт мониторинга, который периодически проверяет доступность этого приложения по HTTP, ведёт логирование и автоматически перезапускает приложение в случае недоступности. Скрипт должен выполняться каждые N секунд и запускаться автоматически при старте системы. Требуется автоматизировать процесс установки и обновления мониторинга, обеспечить параметризацию конфигурационных файлов, снабдить все скрипты комментариями, вести логирование ошибок и подготовить README с описанием технического решения.
---

## Описание проекта
### 1. **Java HTTP‑сервер**
Простое приложение на Java 17, использующее встроенный `HttpServer`. Поддерживает маршруты:

| Маршрут | Описание |
|--------|----------|
| `/` | HTML‑страница с изображением кота |
| `/cat` | JPEG‑картинка |
| `/hello` | текст "Hello World" |
| `/health` | health‑check (`OK`) |

Порт сервера передается через переменную окружения `PORT`.

---

### 2. **Скрипт мониторинга** (`monitor.sh`)
Отвечает за:
- запуск приложения
- периодическую проверку `/health`
- автоматический перезапуск при ошибках
- логирование в stdout и в файл

Конфигурация вынесена в файл `hello-monitor.conf`.

---

### 3. **Docker multi‑stage build**
- Stage 1: `eclipse-temurin:17-jdk` — компиляция Java
- Stage 2: `eclipse-temurin:17-jre` — запуск приложения

В Dockerfile:
- создаются необходимые каталоги
- копируется статика `cat.jpg`
- удаляются CRLF‑символы
- скрипты делаются исполняемыми

---

### 4. **Docker Compose**
Позволяет запускать сервис одной командой:
```
docker compose up -d
```
Задает параметры мониторинга:
```yaml
environment:
  APP_PORT: 8080
  CHECK_INTERVAL_SEC: 5
  LOG_FILE: "/var/log/hello-monitor.log"
```

---

## Структура проекта
```
vk-devops/
│
├── app/
│   ├── src/
│   │   └── HelloCatServer.java
│   └── static/
│       └── cat.jpg
│
├── monitor/
│   ├── monitor.sh
│   └── hello-monitor.conf
│
├── Dockerfile
├── docker-compose.yml
├── Makefile
└── README.md
```

---

## Запуск проекта
### 1. Сборка образа
```
docker compose build
```

### 2. Запуск
```
docker compose up -d
```

### 3. Проверка
```
curl http://localhost:8080/health   # OK
curl http://localhost:8080/hello    # Hello World
```

### 4. Логи
```
docker logs cat-app
```

---

## Использованные технологии
- Java 17
- Bash 
- Docker multi-stage build
- Docker Compose
- Makefile
- Параметризация через ENV и конфиги

---



